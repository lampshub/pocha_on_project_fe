<!-- ë©”ë‰´ ë¶„ì„ ì„¹ì…˜ â€” ìˆ˜ëŸ‰ ë° ë§¤ì¶œ ê¸°ì¤€ ìƒìœ„ 5ê°œ ë©”ë‰´ë¥¼ í‘œì‹œ -->
<template>
  <div class="ds-section">
    <SectionHeader num="04" icon="ğŸ½" title="ë©”ë‰´ ë¶„ì„" sub="ìˆ˜ëŸ‰ Â· ë§¤ì¶œ ê¸°ì¤€ Top 5"/>

    <div v-if="stats.topByQty.length === 0" class="ds-empty">ë©”ë‰´ ë°ì´í„° ì—†ìŒ</div>
    <div v-else class="ds-menu-grid">
      <div>
        <div class="ds-sub-label">ğŸ”¥ ìˆ˜ëŸ‰ TOP</div>
        <div v-for="([name, data], i) in stats.topByQty" :key="'q'+i" class="ds-rank-item">
          <div class="ds-rank-head">
            <span class="ds-rank-label">
              <span class="ds-rank-num" :class="{ first: i === 0 }">{{ i + 1 }}</span>
              {{ name }}
            </span>
            <span class="ds-rank-val">{{ data.qty }}ê°œ</span>
          </div>
          <div class="ds-rank-bar-track">
            <div class="ds-rank-bar-fill"
                 :class="{ first: i === 0 }"
                 :style="{ width: (data.qty / stats.topByQty[0][1].qty * 100) + '%' }"></div>
          </div>
        </div>
      </div>
      <div>
        <div class="ds-sub-label">ğŸ’° ë§¤ì¶œ TOP</div>
        <div v-for="([name, data], i) in stats.topByRevenue" :key="'r'+i" class="ds-rank-item">
          <div class="ds-rank-head">
            <span class="ds-rank-label">
              <span class="ds-rank-num" :class="{ first: i === 0 }">{{ i + 1 }}</span>
              {{ name }}
            </span>
            <span class="ds-rank-val ds-rank-val-sm">{{ fmt(data.revenue) }}</span>
          </div>
          <div class="ds-rank-bar-track">
            <div class="ds-rank-bar-fill"
                 :class="{ first: i === 0 }"
                 :style="{ width: (data.revenue / stats.topByRevenue[0][1].revenue * 100) + '%' }"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import SectionHeader from './SectionHeader.vue'

defineProps({
  stats: { type: Object, required: true },
  fmt: { type: Function, required: true },
})
</script>
